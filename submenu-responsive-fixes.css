/* =============================================================================
   COMPREHENSIVE SUBMENU AND RESPONSIVE FIXES
   ============================================================================= */

/* Reset conflicting styles and provide clean submenu implementation */
.main-navigation .nav-menu .sub-menu {
    position: absolute !important;
    top: 100% !important;
    left: 0 !important;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%) !important;
    min-width: 240px !important;
    border-radius: 12px !important;
    box-shadow: 0 12px 40px rgba(102,126,234,0.25), 0 4px 15px rgba(0,0,0,0.1) !important;
    opacity: 0 !important;
    visibility: hidden !important;
    transform: translateY(-12px) scale(0.98) !important;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1) !important;
    z-index: 9999 !important;
    border: 1px solid rgba(255,255,255,0.15) !important;
    backdrop-filter: blur(20px) !important;
    padding: 12px 0 !important;
    margin-top: 4px !important;
    list-style: none !important;
    overflow: hidden !important;
}

/* Show submenu on hover */
.main-navigation .nav-menu li:hover > .sub-menu {
    opacity: 1 !important;
    visibility: visible !important;
    transform: translateY(0) scale(1) !important;
}

/* Submenu arrow indicator */
.main-navigation .nav-menu .sub-menu::before {
    content: '' !important;
    position: absolute !important;
    top: -6px !important;
    left: 24px !important;
    width: 0 !important;
    height: 0 !important;
    border-left: 6px solid transparent !important;
    border-right: 6px solid transparent !important;
    border-bottom: 6px solid #667eea !important;
    z-index: 10000 !important;
}

/* Submenu list items */
.main-navigation .nav-menu .sub-menu li {
    width: 100% !important;
    margin: 0 !important;
    padding: 0 !important;
    list-style: none !important;
    border-bottom: 1px solid rgba(255,255,255,0.08) !important;
}

.main-navigation .nav-menu .sub-menu li:last-child {
    border-bottom: none !important;
}

/* Submenu links - clean design without arrows */
.main-navigation .nav-menu .sub-menu li a {
    color: #fff !important;
    padding: 14px 24px !important;
    display: block !important;
    border-radius: 0 !important;
    margin: 0 !important;
    transition: all 0.25s ease !important;
    font-weight: 500 !important;
    font-size: 0.9rem !important;
    text-decoration: none !important;
    border: none !important;
    background: transparent !important;
    position: relative !important;
    line-height: 1.4 !important;
    white-space: nowrap !important;
}

/* Submenu link hover effects - simple and clean */
.main-navigation .nav-menu .sub-menu li a:hover {
    background: rgba(255,255,255,0.15) !important;
    color: #f1c40f !important;
    transform: translateX(6px) !important;
}

/* Remove all arrow indicators */
.main-navigation .nav-menu .sub-menu li a::before {
    display: none !important;
}

.main-navigation .nav-menu .sub-menu li a:hover::before {
    display: none !important;
}

/* Multi-level submenu support */
.main-navigation .nav-menu .sub-menu .sub-menu {
    top: 0 !important;
    left: 100% !important;
    margin-top: 0 !important;
    margin-left: 8px !important;
}

/* Remove parent menu item arrows */
.main-navigation .nav-menu li.menu-item-has-children > a::after {
    display: none !important;
}

.main-navigation .nav-menu li.menu-item-has-children:hover > a::after {
    display: none !important;
}

/* =============================================================================
   MOBILE RESPONSIVE FIXES - COMPREHENSIVE
   ============================================================================= */

/* Mobile Navigation - Tablet and below */
@media (max-width: 1024px) {
    .container {
        padding: 0 20px !important;
    }
    
    .hero-title-fancy {
        font-size: 2.5rem !important;
    }
    
    .section-title-fancy {
        font-size: 2rem !important;
    }
}

/* Mobile Navigation - Mobile devices */
@media (max-width: 768px) {
    /* Header adjustments */
    .site-header {
        padding: 12px 0 !important;
        position: relative !important;
    }
    
    .header-container {
        padding: 0 15px !important;
        flex-wrap: wrap !important;
    }
    
    .site-branding .site-title a {
        font-size: 1.5rem !important;
    }
    
    /* Hide desktop navigation */
    .main-navigation {
        display: none !important;
    }
    
    /* Show mobile menu toggle */
    .menu-toggle {
        display: flex !important;
        flex-direction: column !important;
        justify-content: center !important;
        align-items: center !important;
        background: #f1c40f !important;
        color: #764ba2 !important;
        border: none !important;
        padding: 10px !important;
        border-radius: 8px !important;
        cursor: pointer !important;
        transition: all 0.3s ease !important;
        width: 45px !important;
        height: 45px !important;
        position: relative !important;
        z-index: 10001 !important;
    }
    
    .menu-toggle:hover {
        background: #e67e22 !important;
        transform: scale(1.05) !important;
    }
    
    /* Menu toggle bars */
    .menu-toggle span {
        display: block !important;
        width: 18px !important;
        height: 2px !important;
        background: #764ba2 !important;
        margin: 2px 0 !important;
        transition: all 0.3s ease !important;
        border-radius: 1px !important;
    }
    
    /* Active menu toggle animation */
    .menu-toggle.active span:nth-child(2) {
        transform: rotate(45deg) translate(5px, 5px) !important;
    }
    
    .menu-toggle.active span:nth-child(3) {
        opacity: 0 !important;
    }
    
    .menu-toggle.active span:nth-child(4) {
        transform: rotate(-45deg) translate(7px, -6px) !important;
    }
    
    /* Mobile navigation panel */
    .main-navigation.mobile-active {
        display: block !important;
        position: fixed !important;
        top: 0 !important;
        left: 0 !important;
        right: 0 !important;
        bottom: 0 !important;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%) !important;
        z-index: 10000 !important;
        padding: 80px 0 0 0 !important;
        overflow-y: auto !important;
        opacity: 0 !important;
        visibility: hidden !important;
        transform: translateX(-100%) !important;
        transition: all 0.4s ease !important;
    }
    
    .main-navigation.mobile-active.active {
        opacity: 1 !important;
        visibility: visible !important;
        transform: translateX(0) !important;
    }
    
    /* Mobile menu list */
    .main-navigation.mobile-active .nav-menu {
        flex-direction: column !important;
        gap: 0 !important;
        padding: 0 !important;
        margin: 0 !important;
        width: 100% !important;
        list-style: none !important;
    }
    
    /* Mobile menu items */
    .main-navigation.mobile-active .nav-menu li {
        width: 100% !important;
        margin: 0 !important;
        border-bottom: 1px solid rgba(255,255,255,0.1) !important;
        list-style: none !important;
    }
    
    .main-navigation.mobile-active .nav-menu li:last-child {
        border-bottom: none !important;
    }
    
    /* Mobile menu links */
    .main-navigation.mobile-active .nav-menu li a {
        color: #fff !important;
        padding: 18px 25px !important;
        display: block !important;
        border-radius: 0 !important;
        border: none !important;
        background: transparent !important;
        font-size: 1rem !important;
        font-weight: 600 !important;
        text-decoration: none !important;
        transition: all 0.3s ease !important;
        position: relative !important;
        width: 100% !important;
    }
    
    .main-navigation.mobile-active .nav-menu li a:hover,
    .main-navigation.mobile-active .nav-menu li a:focus {
        background: rgba(255,255,255,0.1) !important;
        color: #f1c40f !important;
        padding-left: 35px !important;
    }
    
    /* Mobile submenu handling - nested dropdowns */
    .main-navigation.mobile-active .nav-menu .sub-menu {
        position: static !important;
        opacity: 1 !important;
        visibility: visible !important;
        transform: none !important;
        background: rgba(255,255,255,0.08) !important;
        box-shadow: inset 0 0 15px rgba(0,0,0,0.1) !important;
        border-radius: 0 !important;
        margin: 0 !important;
        padding: 0 !important;
        backdrop-filter: blur(10px) !important;
        border: none !important;
        border-top: 1px solid rgba(255,255,255,0.1) !important;
        max-height: 0 !important;
        overflow: hidden !important;
        transition: max-height 0.3s ease !important;
        width: 100% !important;
    }
    
    .main-navigation.mobile-active .nav-menu .sub-menu.open {
        max-height: 1000px !important;
        padding: 8px 0 !important;
    }
    
    .main-navigation.mobile-active .nav-menu .sub-menu::before {
        display: none !important;
    }
    
    /* Mobile submenu links */
    .main-navigation.mobile-active .nav-menu .sub-menu li a {
        padding: 14px 45px !important;
        font-size: 0.9rem !important;
        color: rgba(255,255,255,0.9) !important;
        font-weight: 500 !important;
        border-bottom: 1px solid rgba(255,255,255,0.05) !important;
    }
    
    .main-navigation.mobile-active .nav-menu .sub-menu li:last-child a {
        border-bottom: none !important;
    }
    
    .main-navigation.mobile-active .nav-menu .sub-menu li a:hover,
    .main-navigation.mobile-active .nav-menu .sub-menu li a:focus {
        color: #f1c40f !important;
        padding-left: 55px !important;
        background: rgba(255,255,255,0.05) !important;
    }
    
    /* Nested mobile submenus (third level) */
    .main-navigation.mobile-active .nav-menu .sub-menu .sub-menu {
        background: rgba(255,255,255,0.05) !important;
        border-top: 1px solid rgba(255,255,255,0.08) !important;
    }
    
    .main-navigation.mobile-active .nav-menu .sub-menu .sub-menu li a {
        padding: 12px 65px !important;
        font-size: 0.85rem !important;
        color: rgba(255,255,255,0.8) !important;
    }
    
    .main-navigation.mobile-active .nav-menu .sub-menu .sub-menu li a:hover,
    .main-navigation.mobile-active .nav-menu .sub-menu .sub-menu li a:focus {
        padding-left: 75px !important;
        color: #f1c40f !important;
    }
    
    /* Mobile submenu indicators */
    .main-navigation.mobile-active .nav-menu li.menu-item-has-children > a::after {
        content: '+' !important;
        font-size: 1.2rem !important;
        position: absolute !important;
        right: 25px !important;
        top: 50% !important;
        transform: translateY(-50%) !important;
        transition: all 0.3s ease !important;
        color: rgba(255,255,255,0.7) !important;
    }
    
    .main-navigation.mobile-active .nav-menu li.menu-item-has-children.open > a::after {
        content: '−' !important;
        transform: translateY(-50%) rotate(180deg) !important;
        color: #f1c40f !important;
    }
    
    /* Nested menu indicators */
    .main-navigation.mobile-active .nav-menu .sub-menu li.menu-item-has-children > a::after {
        right: 45px !important;
        font-size: 1rem !important;
    }
}

/* Mobile overlay improvements */
.mobile-nav-overlay {
    position: fixed !important;
    top: 0 !important;
    left: 0 !important;
    right: 0 !important;
    bottom: 0 !important;
    background: rgba(0, 0, 0, 0.6) !important;
    z-index: 9998 !important;
    opacity: 0 !important;
    visibility: hidden !important;
    transition: all 0.3s ease !important;
    backdrop-filter: blur(5px) !important;
}

.mobile-nav-overlay.active {
    opacity: 1 !important;
    visibility: visible !important;
}

/* Body scroll lock when mobile menu is open */
body.mobile-menu-open {
    overflow: hidden !important;
    position: fixed !important;
    width: 100% !important;
    height: 100% !important;
}

/* Desktop submenu hover improvements */
@media (min-width: 769px) {
    /* Hide mobile menu toggle on desktop */
    .menu-toggle {
        display: none !important;
    }
    
    /* Ensure desktop navigation is visible */
    .main-navigation {
        display: block !important;
        position: relative !important;
        background: transparent !important;
        padding: 0 !important;
        overflow: visible !important;
        opacity: 1 !important;
        visibility: visible !important;
        transform: none !important;
        transition: none !important;
    }
    
    /* Desktop submenu hover triggers */
    .main-navigation .nav-menu li.menu-item-has-children:hover > .sub-menu {
        opacity: 1 !important;
        visibility: visible !important;
        transform: translateY(0) scale(1) !important;
    }
    
    /* Nested submenu hover triggers */
    .main-navigation .nav-menu .sub-menu li.menu-item-has-children:hover > .sub-menu {
        opacity: 1 !important;
        visibility: visible !important;
        transform: translateX(0) scale(1) !important;
    }
    
    .main-navigation .nav-menu .sub-menu li.menu-item-has-children.submenu-left:hover > .sub-menu {
        transform: translateX(0) scale(1) !important;
    }
}

/* =============================================================================
   PRINT STYLES
   ============================================================================= */

@media print {
    .site-header,
    .main-navigation,
    .menu-toggle,
    .mobile-nav-overlay {
        display: none !important;
    }
    
    .hero-section-advanced,
    .services-hero,
    .about-hero,
    .pricing-hero,
    .contact-hero,
    .blog-hero {
        background: white !important;
        color: black !important;
    }
}

/* =============================================================================
   ADDITIONAL SUBMENU POSITIONING AND RESPONSIVE FIXES
   ============================================================================= */

/* Right-aligned submenu for items near screen edge */
.main-navigation .nav-menu .submenu-right {
    left: auto !important;
    right: 0 !important;
}

.main-navigation .nav-menu .submenu-right::before {
    left: auto !important;
    right: 24px !important;
}

/* Loading state for navigation links */
.nav-menu a.loading {
    position: relative !important;
    pointer-events: none !important;
}

.nav-menu a.loading::after {
    content: '' !important;
    position: absolute !important;
    top: 50% !important;
    right: 10px !important;
    width: 12px !important;
    height: 12px !important;
    border: 2px solid transparent !important;
    border-top: 2px solid currentColor !important;
    border-radius: 50% !important;
    animation: spin 1s linear infinite !important;
    transform: translateY(-50%) !important;
}

@keyframes spin {
    0% { transform: translateY(-50%) rotate(0deg); }
    100% { transform: translateY(-50%) rotate(360deg); }
}

/* =============================================================================
   SPECIFIC PAGE RESPONSIVE IMPROVEMENTS
   ============================================================================= */

/* Home page hero adjustments */
@media (max-width: 768px) {
    .front-page .hero-stats {
        flex-direction: column !important;
        gap: 15px !important;
        text-align: center !important;
    }
    
    .front-page .stat-item {
        padding: 15px !important;
        background: rgba(255,255,255,0.1) !important;
        border-radius: 10px !important;
    }
    
    .front-page .floating-card {
        display: none !important;
    }
}

/* Services page mobile improvements */
@media (max-width: 768px) {
    .page-template-page-services .category-card {
        text-align: center !important;
        padding: 30px 20px !important;
    }
    
    .page-template-page-services .category-icon {
        font-size: 2.5rem !important;
        margin-bottom: 15px !important;
    }
    
    .page-template-page-services .service-list {
        text-align: left !important;
        margin: 20px 0 !important;
    }
}

/* Pricing page mobile improvements */
@media (max-width: 768px) {
    .page-template-page-pricing .pricing-categories-section {
        padding: 40px 0 !important;
    }
    
    .page-template-page-pricing .category-pricing {
        margin: 15px 0 !important;
        padding: 20px !important;
    }
    
    .page-template-page-pricing .price-range {
        font-size: 1.5rem !important;
    }
}

/* About page timeline mobile fixes */
@media (max-width: 768px) {
    .page-template-page-about .timeline-item {
        flex-direction: column !important;
        text-align: center !important;
        margin-bottom: 40px !important;
    }
    
    .page-template-page-about .timeline-icon {
        margin: 0 auto 20px auto !important;
        position: relative !important;
    }
    
    .page-template-page-about .timeline-content {
        max-width: 100% !important;
        margin: 0 !important;
    }
}

/* Contact page mobile improvements */
@media (max-width: 768px) {
    .page-template-page-contact .contact-methods-grid {
        grid-template-columns: 1fr !important;
        gap: 20px !important;
    }
    
    .page-template-page-contact .contact-method-card {
        padding: 30px 20px !important;
    }
    
    .page-template-page-contact .method-features {
        justify-content: center !important;
        gap: 8px !important;
    }
}

/* Blog page mobile improvements */
@media (max-width: 768px) {
    .page-template-page-blog .blog-grid,
    .blog .posts-grid {
        grid-template-columns: 1fr !important;
        gap: 20px !important;
    }
    
    .blog-card,
    .post-card {
        margin-bottom: 20px !important;
    }
    
    .blog-card .post-meta,
    .post-card .post-meta {
        font-size: 0.85rem !important;
        margin-bottom: 10px !important;
    }
}

/* =============================================================================
   FORM RESPONSIVE IMPROVEMENTS
   ============================================================================= */

@media (max-width: 768px) {
    .contact-form,
    .newsletter-form,
    .search-form {
        flex-direction: column !important;
        gap: 15px !important;
    }
    
    .contact-form input,
    .contact-form textarea,
    .newsletter-form input,
    .search-form input {
        width: 100% !important;
        padding: 15px !important;
        font-size: 1rem !important;
        border-radius: 10px !important;
    }
    
    .contact-form button,
    .newsletter-form button,
    .search-form button {
        width: 100% !important;
        padding: 15px !important;
        font-size: 1rem !important;
        border-radius: 10px !important;
    }
}

/* =============================================================================
   WIDGET AND SIDEBAR MOBILE FIXES
   ============================================================================= */

@media (max-width: 768px) {
    .widget-area {
        margin-bottom: 20px !important;
        padding: 25px 20px !important;
    }
    
    .widget-title {
        font-size: 1.2rem !important;
        margin-bottom: 15px !important;
    }
    
    .widget ul li {
        padding: 10px 0 !important;
        font-size: 0.95rem !important;
    }
    
    .sidebar {
        margin-top: 40px !important;
    }
}

/* =============================================================================
   FOOTER MOBILE IMPROVEMENTS
   ============================================================================= */

@media (max-width: 768px) {
    .site-footer {
        padding: 50px 0 30px 0 !important;
        text-align: center !important;
    }
    
    .footer-content {
        grid-template-columns: 1fr !important;
        gap: 30px !important;
        text-align: center !important;
    }
    
    .footer-section {
        padding: 0 20px !important;
    }
    
    .footer-social {
        justify-content: center !important;
        gap: 20px !important;
        margin-top: 25px !important;
    }
    
    .contact-info {
        align-items: center !important;
    }
    
    .contact-item {
        justify-content: center !important;
        text-align: center !important;
    }
}

/* =============================================================================
   PERFORMANCE OPTIMIZATIONS
   ============================================================================= */

/* Reduce animations on low-end devices */
@media (max-width: 480px) {
    * {
        animation-duration: 0.2s !important;
        transition-duration: 0.2s !important;
    }
    
    .main-navigation.mobile-active {
        transition-duration: 0.3s !important;
    }
    
    .main-navigation .nav-menu .sub-menu {
        transition-duration: 0.2s !important;
    }
}

/* Optimize for touch devices */
@media (pointer: coarse) {
    .nav-menu li a,
    .main-navigation .nav-menu .sub-menu li a {
        min-height: 44px !important;
        display: flex !important;
        align-items: center !important;
    }
    
    .menu-toggle {
        min-width: 44px !important;
        min-height: 44px !important;
    }
    
    .btn-primary,
    .btn-secondary,
    .category-btn {
        min-height: 44px !important;
        padding: 12px 24px !important;
    }
}

/* =============================================================================
   MULTI-LEVEL SUBMENU FIXES AND MOBILE MENU IMPROVEMENTS
   ============================================================================= */

/* Fix for multi-level dropdown submenus */
.main-navigation .nav-menu .sub-menu.show {
    opacity: 1 !important;
    visibility: visible !important;
    transform: translateY(0) scale(1) !important;
}

/* Multi-level submenu positioning improvements */
.main-navigation .nav-menu .sub-menu .sub-menu {
    top: 0 !important;
    left: 100% !important;
    margin-top: 0 !important;
    margin-left: 8px !important;
    opacity: 0 !important;
    visibility: hidden !important;
    transform: translateX(-15px) scale(0.95) !important;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1) !important;
}

.main-navigation .nav-menu .sub-menu .sub-menu.show {
    opacity: 1 !important;
    visibility: visible !important;
    transform: translateX(0) scale(1) !important;
}

/* Left-positioned nested submenus for screen edge cases */
.main-navigation .nav-menu .sub-menu .sub-menu.submenu-left {
    left: -100% !important;
    right: auto !important;
    margin-left: -8px !important;
    margin-right: 0 !important;
    transform: translateX(15px) scale(0.95) !important;
}

.main-navigation .nav-menu .sub-menu .sub-menu.submenu-left.show {
    transform: translateX(0) scale(1) !important;
}

/* Nested submenu arrow indicators */
.main-navigation .nav-menu .sub-menu .menu-item-has-children > a::after {
    content: '▶' !important;
    font-size: 0.7rem !important;
    margin-left: auto !important;
    margin-right: 0 !important;
    opacity: 0.8 !important;
    transition: all 0.3s ease !important;
}

.main-navigation .nav-menu .sub-menu .menu-item-has-children.submenu-left > a::after {
    content: '◀' !important;
}

/* Enhanced mobile menu display fixes */
@media (max-width: 768px) {
    /* Ensure mobile menu is properly hidden by default */
    .main-navigation {
        display: none !important;
        position: fixed !important;
        top: 0 !important;
        left: 0 !important;
        right: 0 !important;
        bottom: 0 !important;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%) !important;
        z-index: 9999 !important;
        padding: 80px 0 0 0 !important;
        overflow-y: auto !important;
        opacity: 0 !important;
        visibility: hidden !important;
        transform: translateX(-100%) !important;
        transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1) !important;
    }
    
    /* Show mobile menu when active */
    .main-navigation.mobile-active.active {
        display: block !important;
        opacity: 1 !important;
        visibility: visible !important;
        transform: translateX(0) !important;
    }
    
    /* Mobile menu toggle button - ensure it's always visible */
    .menu-toggle {
        display: flex !important;
        flex-direction: column !important;
        justify-content: center !important;
        align-items: center !important;
        background: #f1c40f !important;
        color: #764ba2 !important;
        border: none !important;
        padding: 10px !important;
        border-radius: 8px !important;
        cursor: pointer !important;
        transition: all 0.3s ease !important;
        width: 45px !important;
        height: 45px !important;
        position: relative !important;
        z-index: 10001 !important;
        box-shadow: 0 2px 8px rgba(241,196,15,0.3) !important;
    }
    
    .menu-toggle:hover,
    .menu-toggle:focus {
        background: #e67e22 !important;
        transform: scale(1.05) !important;
        box-shadow: 0 4px 12px rgba(230,126,34,0.4) !important;
    }
    
    /* Menu toggle bars */
    .menu-toggle span {
        display: block !important;
        width: 18px !important;
        height: 2px !important;
        background: #764ba2 !important;
        margin: 2px 0 !important;
        transition: all 0.3s ease !important;
        border-radius: 1px !important;
    }
    
    /* Active menu toggle animation */
    .menu-toggle.active span:nth-child(2) {
        transform: rotate(45deg) translate(5px, 5px) !important;
    }
    
    .menu-toggle.active span:nth-child(3) {
        opacity: 0 !important;
    }
    
    .menu-toggle.active span:nth-child(4) {
        transform: rotate(-45deg) translate(7px, -6px) !important;
    }
    
    /* Mobile navigation list */
    .main-navigation.mobile-active .nav-menu {
        flex-direction: column !important;
        gap: 0 !important;
        padding: 0 !important;
        margin: 0 !important;
        width: 100% !important;
        list-style: none !important;
    }
    
    /* Mobile menu items */
    .main-navigation.mobile-active .nav-menu li {
        width: 100% !important;
        margin: 0 !important;
        border-bottom: 1px solid rgba(255,255,255,0.1) !important;
        list-style: none !important;
    }
    
    .main-navigation.mobile-active .nav-menu li:last-child {
        border-bottom: none !important;
    }
    
    /* Mobile menu links */
    .main-navigation.mobile-active .nav-menu li a {
        color: #fff !important;
        padding: 18px 25px !important;
        display: block !important;
        border-radius: 0 !important;
        border: none !important;
        background: transparent !important;
        font-size: 1rem !important;
        font-weight: 600 !important;
        text-decoration: none !important;
        transition: all 0.3s ease !important;
        position: relative !important;
        width: 100% !important;
    }
    
    .main-navigation.mobile-active .nav-menu li a:hover,
    .main-navigation.mobile-active .nav-menu li a:focus {
        background: rgba(255,255,255,0.1) !important;
        color: #f1c40f !important;
        padding-left: 35px !important;
    }
    
    /* Mobile submenu handling - nested dropdowns */
    .main-navigation.mobile-active .nav-menu .sub-menu {
        position: static !important;
        opacity: 1 !important;
        visibility: visible !important;
        transform: none !important;
        background: rgba(255,255,255,0.08) !important;
        box-shadow: inset 0 0 15px rgba(0,0,0,0.1) !important;
        border-radius: 0 !important;
        margin: 0 !important;
        padding: 0 !important;
        backdrop-filter: blur(10px) !important;
        border: none !important;
        border-top: 1px solid rgba(255,255,255,0.1) !important;
        max-height: 0 !important;
        overflow: hidden !important;
        transition: max-height 0.3s ease !important;
        width: 100% !important;
    }
    
    .main-navigation.mobile-active .nav-menu .sub-menu.open {
        max-height: 1000px !important;
        padding: 8px 0 !important;
    }
    
    .main-navigation.mobile-active .nav-menu .sub-menu::before {
        display: none !important;
    }
    
    /* Mobile submenu links */
    .main-navigation.mobile-active .nav-menu .sub-menu li a {
        padding: 14px 45px !important;
        font-size: 0.9rem !important;
        color: rgba(255,255,255,0.9) !important;
        font-weight: 500 !important;
        border-bottom: 1px solid rgba(255,255,255,0.05) !important;
    }
    
    .main-navigation.mobile-active .nav-menu .sub-menu li:last-child a {
        border-bottom: none !important;
    }
    
    .main-navigation.mobile-active .nav-menu .sub-menu li a:hover,
    .main-navigation.mobile-active .nav-menu .sub-menu li a:focus {
        color: #f1c40f !important;
        padding-left: 55px !important;
        background: rgba(255,255,255,0.05) !important;
    }
    
    /* Nested mobile submenus (third level) */
    .main-navigation.mobile-active .nav-menu .sub-menu .sub-menu {
        background: rgba(255,255,255,0.05) !important;
        border-top: 1px solid rgba(255,255,255,0.08) !important;
    }
    
    .main-navigation.mobile-active .nav-menu .sub-menu .sub-menu li a {
        padding: 12px 65px !important;
        font-size: 0.85rem !important;
        color: rgba(255,255,255,0.8) !important;
    }
    
    .main-navigation.mobile-active .nav-menu .sub-menu .sub-menu li a:hover,
    .main-navigation.mobile-active .nav-menu .sub-menu .sub-menu li a:focus {
        padding-left: 75px !important;
        color: #f1c40f !important;
    }
    
    /* Mobile submenu indicators */
    .main-navigation.mobile-active .nav-menu li.menu-item-has-children > a::after {
        content: '+' !important;
        font-size: 1.2rem !important;
        position: absolute !important;
        right: 25px !important;
        top: 50% !important;
        transform: translateY(-50%) !important;
        transition: all 0.3s ease !important;
        color: rgba(255,255,255,0.7) !important;
    }
    
    .main-navigation.mobile-active .nav-menu li.menu-item-has-children.open > a::after {
        content: '−' !important;
        transform: translateY(-50%) rotate(180deg) !important;
        color: #f1c40f !important;
    }
    
    /* Nested menu indicators */
    .main-navigation.mobile-active .nav-menu .sub-menu li.menu-item-has-children > a::after {
        right: 45px !important;
        font-size: 1rem !important;
    }
}

/* Mobile overlay improvements */
.mobile-nav-overlay {
    position: fixed !important;
    top: 0 !important;
    left: 0 !important;
    right: 0 !important;
    bottom: 0 !important;
    background: rgba(0, 0, 0, 0.6) !important;
    z-index: 9998 !important;
    opacity: 0 !important;
    visibility: hidden !important;
    transition: all 0.3s ease !important;
    backdrop-filter: blur(5px) !important;
}

.mobile-nav-overlay.active {
    opacity: 1 !important;
    visibility: visible !important;
}

/* Body scroll lock when mobile menu is open */
body.mobile-menu-open {
    overflow: hidden !important;
    position: fixed !important;
    width: 100% !important;
    height: 100% !important;
}

/* Desktop submenu hover improvements */
@media (min-width: 769px) {
    /* Hide mobile menu toggle on desktop */
    .menu-toggle {
        display: none !important;
    }
    
    /* Ensure desktop navigation is visible */
    .main-navigation {
        display: block !important;
        position: relative !important;
        background: transparent !important;
        padding: 0 !important;
        overflow: visible !important;
        opacity: 1 !important;
        visibility: visible !important;
        transform: none !important;
        transition: none !important;
    }
    
    /* Desktop submenu hover triggers */
    .main-navigation .nav-menu li.menu-item-has-children:hover > .sub-menu {
        opacity: 1 !important;
        visibility: visible !important;
        transform: translateY(0) scale(1) !important;
    }
    
    /* Nested submenu hover triggers */
    .main-navigation .nav-menu .sub-menu li.menu-item-has-children:hover > .sub-menu {
        opacity: 1 !important;
        visibility: visible !important;
        transform: translateX(0) scale(1) !important;
    }
    
    .main-navigation .nav-menu .sub-menu li.menu-item-has-children.submenu-left:hover > .sub-menu {
        transform: translateX(0) scale(1) !important;
    }
}

/* =============================================================================
   CRITICAL MOBILE MENU TOGGLE FIXES
   ============================================================================= */

/* Ensure menu toggle is always visible on mobile */
@media (max-width: 768px) {
    .menu-toggle {
        display: flex !important;
        position: relative !important;
        z-index: 10002 !important;
        order: 2 !important;
    }
    
    .site-branding {
        order: 1 !important;
        flex: 1 !important;
    }
    
    .header-container {
        display: flex !important;
        justify-content: space-between !important;
        align-items: center !important;
        flex-wrap: nowrap !important;
    }
}

/* Force menu toggle visibility - critical fix */
.menu-toggle {
    visibility: visible !important;
    opacity: 1 !important;
}

/* Desktop menu toggle should be hidden */
@media (min-width: 769px) {
    .menu-toggle {
        display: none !important;
    }
}

/* Additional mobile debugging styles */
@media (max-width: 768px) {
    .main-navigation:not(.mobile-active) {
        display: none !important;
    }
    
    .nav-menu {
        display: flex !important;
    }
}

/* Ensure proper stacking context */
.site-header {
    position: relative !important;
    z-index: 1000 !important;
}

.main-navigation {
    z-index: 9999 !important;
}

.mobile-nav-overlay {
    z-index: 9998 !important;
}

.menu-toggle {
    z-index: 10001 !important;
}
